# Best Practices

This page covers best practices for writing effective Mino goals and handling common challenges.

## Goal Writing Tips

### Be Specific, Not Vague

| Bad (Vague) | Good (Specific) |
|-------------|-----------------|
| "Get data" | "Extract product name, price, and rating" |
| "Fill the form" | "Fill email field with 'test@example.com'" |
| "Click the button" | "Click the blue 'Submit' button in the bottom right" |
| "Extract everything" | "Extract all h2 headings and their associated paragraphs" |

### Use Visual Descriptions

When elements are hard to identify, describe them visually:

```
Click the orange "Buy Now" button below the price

Find the search box with magnifying glass icon in the header

Click the X button in the top right corner of the popup
```

### Number Your Steps

For multi-step workflows, numbering makes the sequence clear:

```
1. Click the "Sign In" button
2. Fill email with "user@example.com"
3. Fill password with "password123"
4. Click "Login"
5. Wait for dashboard to load
6. Extract account balance
```

### Specify Output Format

Tell Mino exactly how you want the data returned:

```
Extract all products and return as JSON array with keys: name, price, url
```

```
Extract the main article content and return as plain text
```

```
Extract the table data and return as array of objects with column headers as keys
```

## Handling Blocked Sites

### Signs You're Being Blocked

- "Access Denied" message
- CAPTCHA challenges
- Endless loading
- 403/429 HTTP errors
- Empty or error responses

### The Escalation Path

Try these in order until it works:

```
1. lite profile (default)
      â†“ Still blocked?
2. stealth profile
      â†“ Still blocked?
3. stealth + proxy
      â†“ Still blocked?
4. stealth + proxy + different country code
```

### Example: Escalating for a Protected Site

**Attempt 1 - Default (fails)**:
```typescript
{
  url: "https://protected-site.com/data",
  goal: "Extract pricing information"
}
```

**Attempt 2 - Stealth mode (might work)**:
```typescript
{
  url: "https://protected-site.com/data",
  goal: "Extract pricing information",
  browser_profile: "stealth"
}
```

**Attempt 3 - Stealth + Proxy (usually works)**:
```typescript
{
  url: "https://protected-site.com/data",
  goal: "Extract pricing information",
  browser_profile: "stealth",
  proxy_config: {
    enabled: true,
    country_code: "US"
  }
}
```

## Handling Dynamic Content

### Wait for Content to Load

If content loads asynchronously, add explicit waits:

```
Wait 3 seconds for the product grid to load, then extract all product names
```

```
Wait for the "Results" heading to appear, then extract the search results
```

### Handle Infinite Scroll

```
Scroll down 3 times, waiting 2 seconds between each scroll,
then extract all visible items
```

### Handle "Load More" Buttons

```
Click the "Load More" button 5 times, then extract all items
```

## Handling Popups and Modals

### Cookie Consent

```
If a cookie consent banner appears, click "Accept All" or "Accept".
Then proceed to extract the main content.
```

### Newsletter Popups

```
If a newsletter signup popup appears, click the X button to close it.
Then extract the product information.
```

### Login Modals

```
If a login modal appears, close it by clicking outside the modal or the X button.
Then continue with the extraction.
```

## Error Handling in Code

### Retry Logic

```typescript
async function runWithRetry(config: MinoConfig, maxRetries = 3) {
  for (let attempt = 1; attempt <= maxRetries; attempt++) {
    try {
      const result = await runMino(config);
      if (result.status === "COMPLETED") {
        return result;
      }
    } catch (error) {
      console.log(`Attempt ${attempt} failed, retrying...`);
    }

    // Wait before retry
    await new Promise(r => setTimeout(r, 2000 * attempt));
  }
  throw new Error("Max retries exceeded");
}
```

### Graceful Degradation

```typescript
const result = await runMino(config);

if (result.status === "COMPLETED") {
  return result.resultJson;
} else if (result.status === "PARTIAL") {
  // Return what we got
  console.warn("Partial results:", result.resultJson);
  return result.resultJson;
} else {
  // Log error and return empty/default
  console.error("Automation failed:", result.error);
  return { products: [], error: result.error };
}
```

## Performance Optimization

### Minimize Scope

Only extract what you need:

```
// Bad - extracts everything
Extract all data from the page

// Good - specific scope
Extract only the product name and price from the featured products section
```

### Batch Similar Operations

If extracting from multiple pages, consider:

```typescript
// Process pages in parallel where possible
const results = await Promise.all([
  runMino({ url: "site.com/page/1", goal }),
  runMino({ url: "site.com/page/2", goal }),
  runMino({ url: "site.com/page/3", goal }),
]);
```

### Use lite Mode When Possible

Stealth mode is slower. Only use it when necessary:

| Mode | Typical Time | Use When |
|------|--------------|----------|
| lite | 3-10s | Standard sites, no protection |
| stealth | 10-30s | Bot protection, CAPTCHAs |
| stealth + proxy | 15-45s | Geo-restrictions, heavy protection |

## Testing Strategies

### Test Incrementally

1. Test basic URL access
2. Test simple extraction
3. Add complexity gradually
4. Test edge cases

### Use the streamingUrl

Always log and watch the streamingUrl during development:

```typescript
if (event.streamingUrl) {
  console.log("ðŸ”´ LIVE:", event.streamingUrl);
}
```

### Test with Known Data

When possible, test against pages with known content so you can verify accuracy:

```typescript
// Test against a predictable page
const testConfig = {
  url: "https://scrapeme.live/shop/",
  goal: "Extract the first product name"
};

const result = await runMino(testConfig);

// We know the first product should be "Bulbasaur"
expect(result.productName).toBe("Bulbasaur");
```

## Common Mistakes to Avoid

### 1. Being Too Vague

```
// Don't
"Get the data"

// Do
"Extract product name, price, and URL from each product card"
```

### 2. Ignoring Page Load Times

```
// Don't
"Extract search results"

// Do
"Wait for search results to load, then extract all result titles and URLs"
```

### 3. Not Handling Popups

```
// Don't (may fail if popup appears)
"Extract all article titles"

// Do
"Close any popups that appear, then extract all article titles"
```

### 4. Over-Complicating Goals

```
// Don't (too complex, likely to fail)
"Navigate through all 50 pages, scroll each page 3 times,
click any load more buttons, handle all popups, and extract
every piece of data including images, descriptions, and metadata"

// Do (simpler, more reliable)
"Extract product name and price from all visible products on this page"
```

### 5. Not Using Stealth When Needed

If you get blocked, escalate to stealth mode before trying to debug the goal.
